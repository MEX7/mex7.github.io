<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>MEX7</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://mex7.github.io/"/>
  <updated>2021-04-12T02:34:11.523Z</updated>
  <id>http://mex7.github.io/</id>
  
  <author>
    <name>mex7</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>CGO</title>
    <link href="http://mex7.github.io/2021/04/12/CGO/"/>
    <id>http://mex7.github.io/2021/04/12/CGO/</id>
    <published>2021-04-12T03:34:40.000Z</published>
    <updated>2021-04-12T02:34:11.523Z</updated>
    
    <content type="html"><![CDATA[<p>回调模式demo</p><p><a href="https://github.com/mex7/cgo" target="_blank" rel="noopener">https://github.com/mex7/cgo</a></p><p>流程详解</p><p><img src="https://files.catbox.moe/uzb0c1.png" alt="https://files.catbox.moe/uzb0c1.png"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;回调模式demo&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/mex7/cgo&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://github.com/mex7/cgo&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;流程详解&lt;/p&gt;
&lt;p&gt;&lt;
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>K8s Web Shell</title>
    <link href="http://mex7.github.io/2021/04/11/K8sWebShell/"/>
    <id>http://mex7.github.io/2021/04/11/K8sWebShell/</id>
    <published>2021-04-11T05:18:54.000Z</published>
    <updated>2021-04-12T02:25:24.199Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>DouYu</title>
    <link href="http://mex7.github.io/2021/04/06/Life/"/>
    <id>http://mex7.github.io/2021/04/06/Life/</id>
    <published>2021-04-05T16:09:36.000Z</published>
    <updated>2021-04-12T02:35:30.068Z</updated>
    
    <content type="html"><![CDATA[<p>2017年3月进入斗鱼，开始学习go语言，并进行</p><ul><li>斗鱼文档系统</li><li>监控系统</li><li>微服务管理系统开发</li><li>链路中心</li><li>推流QoS监控</li><li>直播列表排序</li><li></li></ul><p>2018年</p><ul><li>识别服务调度平台</li><li>微服务用户中心</li><li>微服务监控中心</li><li>自建CDN调度系统</li><li>斗鱼 开发平台</li></ul><p>2019年</p><ul><li>识别架构设计</li><li>识别架构优化</li><li></li></ul><p>2020年</p><ul><li>斗鱼应用容器化推动</li><li>斗鱼微服务管理平台</li><li>算法自动化套件研发</li><li>华为SaaS平台接入</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;2017年3月进入斗鱼，开始学习go语言，并进行&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;斗鱼文档系统&lt;/li&gt;
&lt;li&gt;监控系统&lt;/li&gt;
&lt;li&gt;微服务管理系统开发&lt;/li&gt;
&lt;li&gt;链路中心&lt;/li&gt;
&lt;li&gt;推流QoS监控&lt;/li&gt;
&lt;li&gt;直播列表排序&lt;/li&gt;
&lt;li&gt;&lt;/l
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>你一定会成为你想要成为的人</title>
    <link href="http://mex7.github.io/2021/03/29/%E4%BD%A0%E4%B8%80%E5%AE%9A%E4%BC%9A%E6%88%90%E4%B8%BA%E4%BD%A0%E6%83%B3%E8%A6%81%E6%88%90%E4%B8%BA%E7%9A%84%E4%BA%BA/"/>
    <id>http://mex7.github.io/2021/03/29/%E4%BD%A0%E4%B8%80%E5%AE%9A%E4%BC%9A%E6%88%90%E4%B8%BA%E4%BD%A0%E6%83%B3%E8%A6%81%E6%88%90%E4%B8%BA%E7%9A%84%E4%BA%BA/</id>
    <published>2021-03-29T07:09:25.000Z</published>
    <updated>2021-03-29T07:15:00.205Z</updated>
    
    <content type="html"><![CDATA[<p>生命是没意义的 因为你我终将死去<br>时间的长河会抹去 你我存在的痕迹<br>可自从人类 学会相爱的那一刻起<br>我们因为对方的存在 而获得了意义<br>理解或不理解都罢了，相信你所相信的<br>我们的确无法去改变 你我的生老病死<br>但至少你有权力去选择人生<br>你一定能够成为你想要去成为的人  </p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;生命是没意义的 因为你我终将死去&lt;br&gt;时间的长河会抹去 你我存在的痕迹&lt;br&gt;可自从人类 学会相爱的那一刻起&lt;br&gt;我们因为对方的存在 而获得了意义&lt;br&gt;理解或不理解都罢了，相信你所相信的&lt;br&gt;我们的确无法去改变 你我的生老病死&lt;br&gt;但至少你有权力去选择人生&lt;br&gt;
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>Go</title>
    <link href="http://mex7.github.io/2021/03/26/Go/"/>
    <id>http://mex7.github.io/2021/03/26/Go/</id>
    <published>2021-03-26T13:53:15.000Z</published>
    <updated>2021-04-02T11:15:27.313Z</updated>
    
    <content type="html"><![CDATA[<p>数组是值类型</p><p>常量是无类型</p><p>Go 语言指针不支持运算</p><p>Golang 没有类概念</p><p>GoMock 不能对函数打桩</p><p>panic导致异常，延迟函数会执行</p><p>GO预研中字符串是不可变的，所以不能对字符串中某个字符单独复制</p><p>import后面跟的是包路径</p><p>go vendor会优先从vendor目录寻找依赖包</p><p>cap 返回数组的元素个数：slice channel array</p><p>go tool vet 才可以递归</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;数组是值类型&lt;/p&gt;
&lt;p&gt;常量是无类型&lt;/p&gt;
&lt;p&gt;Go 语言指针不支持运算&lt;/p&gt;
&lt;p&gt;Golang 没有类概念&lt;/p&gt;
&lt;p&gt;GoMock 不能对函数打桩&lt;/p&gt;
&lt;p&gt;panic导致异常，延迟函数会执行&lt;/p&gt;
&lt;p&gt;GO预研中字符串是不可变的，所以不能对字符串
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>IOModel</title>
    <link href="http://mex7.github.io/2021/03/25/IOModel/"/>
    <id>http://mex7.github.io/2021/03/25/IOModel/</id>
    <published>2021-03-25T03:46:00.000Z</published>
    <updated>2021-03-26T13:34:27.094Z</updated>
    
    <content type="html"><![CDATA[<h2 id="IO-Model"><a href="#IO-Model" class="headerlink" title="IO Model"></a>IO Model</h2><h3 id="同步阻塞-IO"><a href="#同步阻塞-IO" class="headerlink" title="同步阻塞 IO"></a>同步阻塞 IO</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">while(<span class="literal">true</span>)</span><br><span class="line">&#123;</span><br><span class="line">  socket = accept();</span><br><span class="line">  handle(socket);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="同步非阻塞-IO，线程轮询"><a href="#同步非阻塞-IO，线程轮询" class="headerlink" title="同步非阻塞 IO，线程轮询"></a>同步非阻塞 IO，线程轮询</h3><p>瞬时高并发会打垮系统。</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">while(<span class="literal">true</span>)</span><br><span class="line">&#123;</span><br><span class="line">  socket = accept();</span><br><span class="line">  <span class="built_in">new</span> thread(socket);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="IO-多路复用-异步阻塞-IO：Reactor-设计模式，Linux-中的-epoll"><a href="#IO-多路复用-异步阻塞-IO：Reactor-设计模式，Linux-中的-epoll" class="headerlink" title="IO 多路复用/异步阻塞 IO：Reactor 设计模式，Linux 中的 epoll"></a>IO 多路复用/异步阻塞 IO：Reactor 设计模式，Linux 中的 epoll</h3><p>Reactor 设计模式</p><h3 id="异步-IO-异步非阻塞-IO：Proactor-设计模式"><a href="#异步-IO-异步非阻塞-IO：Proactor-设计模式" class="headerlink" title="异步 IO/异步非阻塞 IO：Proactor 设计模式"></a>异步 IO/异步非阻塞 IO：Proactor 设计模式</h3><p>Proactor 设计模式</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;IO-Model&quot;&gt;&lt;a href=&quot;#IO-Model&quot; class=&quot;headerlink&quot; title=&quot;IO Model&quot;&gt;&lt;/a&gt;IO Model&lt;/h2&gt;&lt;h3 id=&quot;同步阻塞-IO&quot;&gt;&lt;a href=&quot;#同步阻塞-IO&quot; class=&quot;header
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>CollaborativeFiltering</title>
    <link href="http://mex7.github.io/2021/03/25/CollaborativeFiltering/"/>
    <id>http://mex7.github.io/2021/03/25/CollaborativeFiltering/</id>
    <published>2021-03-25T02:36:45.000Z</published>
    <updated>2021-03-25T03:27:57.589Z</updated>
    
    <content type="html"><![CDATA[<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>推荐算法</p><ol><li>基于内容推荐：依赖自然语言NLP知识，挖掘文本TF-IDF特征向量，可以找到用户独特的小众喜好，较好的解释性。</li><li>协调过滤推荐：基于机器学习算法</li></ol><h2 id="协同过滤推荐"><a href="#协同过滤推荐" class="headerlink" title="协同过滤推荐"></a>协同过滤推荐</h2><p>包括在线协同和离线过滤两个部分。</p><ul><li>在线协同：通过在线数据找到用户可能喜欢的物品</li><li>离线过滤：过滤掉不值得推荐的部分，例如评分低或用户已购买</li></ul><ol><li>基于用户 user-based：用户之间的相似度，相似用户推荐相似内容；计算复杂度高于 item-based ；大型项目优先考虑这个。</li><li>基于项目 item-based：内容之间的相似度，根据内容预测用户；缺乏推荐多样性</li><li>基于模型 model based：用部分用户和部分内容间的关系，根据模型来预测全部数据间的关系</li></ol><p>缺陷：</p><ul><li>冷启动问题</li><li>没有考虑情境间的差异</li><li>无法得到小众喜好</li></ul><h3 id="建模算法"><a href="#建模算法" class="headerlink" title="建模算法"></a>建模算法</h3><h4 id="关联算法"><a href="#关联算法" class="headerlink" title="关联算法"></a>关联算法</h4><p>分析用户购买物品，做频繁集挖掘，找到其他用户未购买过的相物品，如果用户购买了其中的物品，则进行其他相关规则推荐（支持度、置信度、提升度）。</p><ul><li>Apriori 算法</li><li>FP Tree 算法</li><li>PrefixSpan 算法</li></ul><h4 id="聚类算法"><a href="#聚类算法" class="headerlink" title="聚类算法"></a>聚类算法</h4><p>将用户和物品进行一定规则的聚类</p><ul><li>K-Means 聚类算法</li><li>BIRCH 聚类算法</li><li>DBSCAN 密度聚类算法</li><li>谱聚类（spectral clustering）</li></ul><h4 id="分类算法"><a href="#分类算法" class="headerlink" title="分类算法"></a>分类算法</h4><p>根据用户评分进行分段后推荐</p><ul><li>逻辑回归：解释性强，有明确的概率，可以根据数据特征做工程化，调优目的明确。</li><li>朴素贝叶斯</li></ul><h4 id="回归算法"><a href="#回归算法" class="headerlink" title="回归算法"></a>回归算法</h4><p>通过回归模型对用户打分预测，得到评分连续值，而非离散值</p><ul><li>Ridge 回归</li><li>回归树</li><li>支持向量回归</li></ul><h4 id="矩阵分解"><a href="#矩阵分解" class="headerlink" title="矩阵分解"></a>矩阵分解</h4><p>用户物品评分是稀疏矩阵</p><ul><li>FunkSVD</li><li>BiasSVD</li><li>SVD++</li></ul><h4 id="神经网络"><a href="#神经网络" class="headerlink" title="神经网络"></a>神经网络</h4><p>两层神经网络进行推荐算法，限制波尔兹曼机（RBM）。</p><h4 id="图模型"><a href="#图模型" class="headerlink" title="图模型"></a>图模型</h4><p>用户相似度放到一个图模型里</p><ul><li>SimRank 被相似对象引用的两个对象也具有相似性</li><li>马尔科夫模型 基于马尔科夫链，基于传导性找出普通距离度量算法难以找出的相似性</li></ul><h4 id="隐语义模型"><a href="#隐语义模型" class="headerlink" title="隐语义模型"></a>隐语义模型</h4><p>基于 NLP 对用户行为进行分析</p><ul><li>LSA</li><li>隐含狄利克雷分布 LDA</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;/a&gt;简介&lt;/h2&gt;&lt;p&gt;推荐算法&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;基于内容推荐：依赖自然语言NLP知识，挖掘文本TF-IDF特征向量，可以找到用户独特的小众喜好，较好的解
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>GoMock</title>
    <link href="http://mex7.github.io/2021/03/23/GoMock/"/>
    <id>http://mex7.github.io/2021/03/23/GoMock/</id>
    <published>2021-03-23T07:29:41.000Z</published>
    <updated>2021-03-23T07:30:00.087Z</updated>
    
    <content type="html"><![CDATA[<p>go install github.com/golang/mock/mockgen@v1.5.0</p><p>go doc github.com/golang/mock/gomock</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;go install github.com/golang/mock/mockgen@v1.5.0&lt;/p&gt;
&lt;p&gt;go doc github.com/golang/mock/gomock&lt;/p&gt;

      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>SecurityVulnerabilitiesDefensiveMeasures</title>
    <link href="http://mex7.github.io/2021/03/23/SecurityVulnerabilitiesDefensiveMeasures/"/>
    <id>http://mex7.github.io/2021/03/23/SecurityVulnerabilitiesDefensiveMeasures/</id>
    <published>2021-03-23T03:06:26.000Z</published>
    <updated>2021-03-23T06:40:29.299Z</updated>
    
    <content type="html"><![CDATA[<h2 id="SQL注入攻击"><a href="#SQL注入攻击" class="headerlink" title="SQL注入攻击"></a>SQL注入攻击</h2><ul><li>sql 转换，特殊字符转义，危险字符、关键词过滤</li><li>输入字段类型限制、长度限制</li><li>统一采用 utf8mb4 编码</li><li>限制客户端对数据库的操作权限</li></ul><h2 id="XSS（Cross-Site-Scripting）跨站脚本攻击"><a href="#XSS（Cross-Site-Scripting）跨站脚本攻击" class="headerlink" title="XSS（Cross Site Scripting）跨站脚本攻击"></a>XSS（Cross Site Scripting）跨站脚本攻击</h2><p>本质是 html 注入</p><ul><li>字符过滤</li><li>服务端进行数据内容校验</li><li>白名单屏蔽恶意链接</li><li>后端对页面输出进行编码转换</li></ul><h2 id="CSRF（Server-Side-Request-Forgery）跨站请求伪造攻击"><a href="#CSRF（Server-Side-Request-Forgery）跨站请求伪造攻击" class="headerlink" title="CSRF（Server-Side Request Forgery）跨站请求伪造攻击"></a>CSRF（Server-Side Request Forgery）跨站请求伪造攻击</h2><p>请求伪造</p><ul><li>服务端进行 Referer 验证</li><li>具备过期时间的 token</li><li>header 加入自定义属性校验，短时间或者单词请求有效</li></ul><h2 id="任意文件上传、下载"><a href="#任意文件上传、下载" class="headerlink" title="任意文件上传、下载"></a>任意文件上传、下载</h2><ul><li>上传下载身份验证，用户只操作自有权限文件或文件类型</li><li>验证文件类型、大小，后端进行文件类型校验、目录执行权限限制</li><li>禁止回传绝对路径，禁止用户上传数据进行目录指定和文件名称定义</li><li>限制目录权限，提供独立的读取接口</li></ul><h2 id="越权访问"><a href="#越权访问" class="headerlink" title="越权访问"></a>越权访问</h2><ul><li>数据从当前登录态获取</li></ul><h2 id="未授权访问"><a href="#未授权访问" class="headerlink" title="未授权访问"></a>未授权访问</h2><ul><li>api 接口签名</li></ul><h2 id="明文传输"><a href="#明文传输" class="headerlink" title="明文传输"></a>明文传输</h2><ul><li>公网走 https</li><li>敏感数据单独加密</li><li>核心数据存储加密</li></ul><h2 id="敏感信息泄露"><a href="#敏感信息泄露" class="headerlink" title="敏感信息泄露"></a>敏感信息泄露</h2><ul><li>接口返回数据</li><li>注释</li><li>程序后门</li><li>报错提示</li></ul><h2 id="暴力破解"><a href="#暴力破解" class="headerlink" title="暴力破解"></a>暴力破解</h2><ul><li>用户登录次数限制</li><li>IP访问限制</li><li>服务端校验</li><li>API鉴权</li></ul><h2 id="XXE（XML-External-Entity-Injection）XML-外部实体注入攻击"><a href="#XXE（XML-External-Entity-Injection）XML-外部实体注入攻击" class="headerlink" title="XXE（XML External Entity Injection）XML 外部实体注入攻击"></a>XXE（XML External Entity Injection）XML 外部实体注入攻击</h2><ul><li>对用户提交的 XML 数据进行关键词过滤</li></ul><h2 id="短信、邮件轰炸"><a href="#短信、邮件轰炸" class="headerlink" title="短信、邮件轰炸"></a>短信、邮件轰炸</h2><ul><li>限制使用频率</li><li>异步发送，单次发布记录持久化后进行重复校验</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;SQL注入攻击&quot;&gt;&lt;a href=&quot;#SQL注入攻击&quot; class=&quot;headerlink&quot; title=&quot;SQL注入攻击&quot;&gt;&lt;/a&gt;SQL注入攻击&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;sql 转换，特殊字符转义，危险字符、关键词过滤&lt;/li&gt;
&lt;li&gt;输入字段类型限制、长
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>Docker</title>
    <link href="http://mex7.github.io/2021/03/21/Docker/"/>
    <id>http://mex7.github.io/2021/03/21/Docker/</id>
    <published>2021-03-21T14:49:57.503Z</published>
    <updated>2021-04-12T02:30:04.366Z</updated>
    
    <content type="html"><![CDATA[<h2 id="常用指令"><a href="#常用指令" class="headerlink" title="常用指令"></a>常用指令</h2><h3 id="删除目前所有容器"><a href="#删除目前所有容器" class="headerlink" title="删除目前所有容器"></a>删除目前所有容器</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop $(docker ps -q) &amp; docker rm $(docker ps -aq)</span><br></pre></td></tr></table></figure><h3 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name <span class="built_in">local</span>-mysql -e MYSQL_ROOT_PASSWORD=root -p 3306:3306 mysql:latest</span><br></pre></td></tr></table></figure><h3 id="进入容器"><a href="#进入容器" class="headerlink" title="进入容器"></a>进入容器</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it xxxxx /bin/bash</span><br></pre></td></tr></table></figure><h2 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h2><h3 id="某集成镜像"><a href="#某集成镜像" class="headerlink" title="某集成镜像"></a>某集成镜像</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">FROM centos</span><br><span class="line"></span><br><span class="line"><span class="comment"># Maintainer's information</span></span><br><span class="line">MAINTAINER xxx &lt;xxx.com&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># set env</span></span><br><span class="line">ENV REGION_CODE=cn_wuhan_guanggu \</span><br><span class="line">    REGION_NAME=武汉光谷 \</span><br><span class="line">    ZONE_CODE=cn_wuhan_guanggu_f3 \</span><br><span class="line">    ZONE_NAME=武汉光谷可用区F3 \</span><br><span class="line">    APP_ENV=dev \</span><br><span class="line">    BASE_DIR=<span class="string">"/home/www/server/juno"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># copy file</span></span><br><span class="line">ADD . /home/www/server/juno</span><br><span class="line">RUN chmod -R 775 /home/www/server/juno/bin</span><br><span class="line">RUN <span class="built_in">cd</span> /home/www/server/juno &amp;&amp; ls -l</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># install httpd package</span></span><br><span class="line">RUN yum -y update</span><br><span class="line"></span><br><span class="line"><span class="comment"># mysql</span></span><br><span class="line">RUN yum -y install sudo mysql mysql-server  \</span><br><span class="line">    &amp;&amp; mysqld \</span><br><span class="line">    &amp;&amp; mysql -e <span class="string">"grant all privileges on *.* to 'root'@'%' identified by 'root';"</span> \</span><br><span class="line">    &amp;&amp; mysql -e <span class="string">"grant all privileges on *.* to 'root'@'localhost' identified by 'root';"</span> \</span><br><span class="line">    &amp;&amp; mysql -u root -proot -e <span class="string">"show databases;"</span> \</span><br><span class="line">    &amp;&amp; /home/www/server/juno/install \</span><br><span class="line">    &amp;&amp; mysql -u root -proot -e <span class="string">"show databases;"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># etcd</span></span><br><span class="line">RUN yum -y install etcd &amp;&amp;\</span><br><span class="line">    nohup ./etcd &gt;/tmp/etcd.log 2&gt;&amp;1</span><br><span class="line"></span><br><span class="line"><span class="comment"># nginx</span></span><br><span class="line">RUN yum -y install nginx &amp;&amp;\</span><br><span class="line">    copy /home/www/server/juno/config/nginx/juno.com.conf /etc/nginx/conf.d/juno.com.conf &amp;&amp;\</span><br><span class="line">    RUN /sbin/nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># supervisor</span></span><br><span class="line">RUN yum -y supervisor &amp;&amp;\</span><br><span class="line">    copy /home/www/server-juno/config/supervisor/supervisord.conf /etc/supervisord.conf</span><br><span class="line"></span><br><span class="line">EXPOSE 80 50000</span><br><span class="line">CMD [<span class="string">"/usr/bin/supervisord"</span>]</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;常用指令&quot;&gt;&lt;a href=&quot;#常用指令&quot; class=&quot;headerlink&quot; title=&quot;常用指令&quot;&gt;&lt;/a&gt;常用指令&lt;/h2&gt;&lt;h3 id=&quot;删除目前所有容器&quot;&gt;&lt;a href=&quot;#删除目前所有容器&quot; class=&quot;headerlink&quot; title=&quot;删
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>Golang Design Patterns</title>
    <link href="http://mex7.github.io/2021/03/19/DesignPattern/"/>
    <id>http://mex7.github.io/2021/03/19/DesignPattern/</id>
    <published>2021-03-19T08:34:40.000Z</published>
    <updated>2021-03-26T13:32:19.998Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://github.com/senghoo/golang-design-pattern" target="_blank" rel="noopener">https://github.com/senghoo/golang-design-pattern</a></p><p>golang 设计模式</p><h2 id="创建型模式"><a href="#创建型模式" class="headerlink" title="创建型模式"></a>创建型模式</h2><h3 id="简单工厂模式"><a href="#简单工厂模式" class="headerlink" title="简单工厂模式"></a>简单工厂模式</h3><ol><li>定义 interface 提供 New 方法</li><li>多个 struct 实现上一步 interface 内部方法</li><li>这些 struct 都是这个 interface 的工厂实现</li><li>通过 New 的不同传入参数来决定返回的具体 struct</li></ol><h3 id="工厂方法模式"><a href="#工厂方法模式" class="headerlink" title="工厂方法模式"></a>工厂方法模式</h3><p>多个不同的对象具有相同的底层函数逻辑</p><ol><li>实际实现 interface</li><li>工厂 interface</li><li>基础的操作 struct</li><li>A B struct 具有相同的底层函数，只有操作结果不同</li></ol><h3 id="抽象工厂模式"><a href="#抽象工厂模式" class="headerlink" title="抽象工厂模式"></a>抽象工厂模式</h3><p>流程控制，将所有的过程都进行了抽象</p><ol><li>功能x和功能y interface</li><li>工厂 interface 包含以上功能x/y interface 的实现</li><li>A工厂分别构造功能x/y的 struct</li><li>A工厂构造工厂 interface 的实现</li></ol><h3 id="创建者模式"><a href="#创建者模式" class="headerlink" title="创建者模式"></a>创建者模式</h3><ol><li>build interface</li><li>Director new build interface</li><li>Construct 方法</li><li>builder1 和 builder2 实现 build interface</li></ol><h3 id="原型模式"><a href="#原型模式" class="headerlink" title="原型模式"></a>原型模式</h3><p>对象可对自身进行复制</p><h3 id="单例模式"><a href="#单例模式" class="headerlink" title="单例模式"></a>单例模式</h3><p>once.Do()</p><h2 id="结构型模式"><a href="#结构型模式" class="headerlink" title="结构型模式"></a>结构型模式</h2><h3 id="外观模式"><a href="#外观模式" class="headerlink" title="外观模式"></a>外观模式</h3><p>目前常用的模式，对象内部进行了多个interface的实现，并对某些函数功能进行组装</p><h3 id="适配器模式"><a href="#适配器模式" class="headerlink" title="适配器模式"></a>适配器模式</h3><p>将对象内部方法进行封装调用，感觉在鉴权方面可能有使用空间</p><h3 id="代理模式"><a href="#代理模式" class="headerlink" title="代理模式"></a>代理模式</h3><p>实际开发中也很常用</p><h3 id="组合模式"><a href="#组合模式" class="headerlink" title="组合模式"></a>组合模式</h3><p>根据一定规律对数据进行组装，目标为可递归对象</p><h3 id="享元模式"><a href="#享元模式" class="headerlink" title="享元模式"></a>享元模式</h3><p>一般情况下，我们可能直接在GET中获取到了需要的对象数据，而不考虑进一步的 factory 封装</p><h3 id="装饰模式"><a href="#装饰模式" class="headerlink" title="装饰模式"></a>装饰模式</h3><p>对一个内容进行重复处理，例如对图片数据进行鉴黄、涉政、广告等检测</p><ol><li>目标 interface</li><li>多个 decorator struct 都包含目标 interface，并对其进行实现</li><li>多个实现之间进行调用，传递相同的 interface struct</li></ol><h3 id="桥模式"><a href="#桥模式" class="headerlink" title="桥模式"></a>桥模式</h3><ol><li>抽象消息发送对象</li><li>抽象执行发送对象</li><li>将不同的执行者添加为不同发送者的内部对象</li><li>执行统一的发送函数，实现不同的效果</li></ol><h2 id="行为模式"><a href="#行为模式" class="headerlink" title="行为模式"></a>行为模式</h2><h3 id="中介者模式"><a href="#中介者模式" class="headerlink" title="中介者模式"></a>中介者模式</h3><p>适用于内部多种不同对象的功能封装</p><h3 id="观察者模式"><a href="#观察者模式" class="headerlink" title="观察者模式"></a>观察者模式</h3><ol><li>Observer interface，实现 struct， 提供 update 方法</li><li>subject 增加 observer 注册，提供调用方法调用 update</li></ol><h3 id="命令模式"><a href="#命令模式" class="headerlink" title="命令模式"></a>命令模式</h3><ol><li>对象 a 中可能存在2中操作，分别对这两个操作构建命令的 interface</li><li>将对象 a 传入命令的 struct 中</li><li>再将这两个命令的 struct 传入对象 b 中，那么对象 b 就可以操作对象 a 的操作组合</li></ol><h3 id="迭代器模式"><a href="#迭代器模式" class="headerlink" title="迭代器模式"></a>迭代器模式</h3><ol><li>Aggregate interface 里面包含 Iterator</li><li>Iterator 包含 First IsDone Next 三个方法</li><li>使用方法传入 Iterator 进行迭代</li></ol><h3 id="模板方法模式"><a href="#模板方法模式" class="headerlink" title="模板方法模式"></a>模板方法模式</h3><p>匿名组合模式实现继承。</p><p>父类需要调用子类方法，所以子类需要匿名组合父类的时候也需要持有子类的应用</p><ol><li>定义了模板操作</li><li>不同的方式实现模板的内部操作</li><li>保证对外暴露的调用方式唯一</li><li>适用于内部操作比较多的组合场景</li></ol><h3 id="策略模式"><a href="#策略模式" class="headerlink" title="策略模式"></a>策略模式</h3><ol><li>对象 a 内部有多重变量</li><li>传入对 a 变量操作的不同策略</li></ol><p>适用于不同策略的初始化场景，这个和享元模式组合应该不错</p><h3 id="状态模式"><a href="#状态模式" class="headerlink" title="状态模式"></a>状态模式</h3><p>适用于状态传递，对同一个 interface 的多个 struct，进行互相间的状态传递，与装饰模式的区别是一个在内部定义固有规则传递，一个是在外部人为控制传递。</p><ol><li>Week interface，包含 Today 和 Next，Next 里面传递了下一个次序的 struct DayContext</li><li>实现多个不同的 DayContext， 定义各自的 Next 就可以持续传递</li></ol><h3 id="备忘录模式"><a href="#备忘录模式" class="headerlink" title="备忘录模式"></a>备忘录模式</h3><p>暴露一个内部数据状态的方法</p><h3 id="解释器模式"><a href="#解释器模式" class="headerlink" title="解释器模式"></a>解释器模式</h3><ol><li>对原始数据进行规则解析，解析为统一的对象</li><li>调用 interpret 方法进行计算，node 的 left 和 right 使用很巧妙</li></ol><h3 id="责任链模式"><a href="#责任链模式" class="headerlink" title="责任链模式"></a>责任链模式</h3><p>递归传递判断</p><h3 id="访问者模式"><a href="#访问者模式" class="headerlink" title="访问者模式"></a>访问者模式</h3><p>struct 互相传递进行访问，有点像复杂版的策略模式</p><h2 id="高性能的-I-O-设计"><a href="#高性能的-I-O-设计" class="headerlink" title="高性能的 I/O 设计"></a>高性能的 I/O 设计</h2><h3 id="Reactor-设计模式-响应器模式"><a href="#Reactor-设计模式-响应器模式" class="headerlink" title="Reactor 设计模式/响应器模式"></a>Reactor 设计模式/响应器模式</h3><p>同步 IO 操作。适用场景为瞬间大并发。</p><p>与观察者模式的区别在于多个事件源的关联。</p><p>减少等待。当遇到需要等待 IO 时，先释放资源，再通过事件驱动继续之前的处理。</p><h3 id="Proactor-设计模式"><a href="#Proactor-设计模式" class="headerlink" title="Proactor 设计模式"></a>Proactor 设计模式</h3><h2 id="相关文档"><a href="#相关文档" class="headerlink" title="相关文档"></a>相关文档</h2><p><a href="https://www.jianshu.com/p/458e4b276607" target="_blank" rel="noopener">Reactor 反应堆设计模式</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://github.com/senghoo/golang-design-pattern&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://github.com/senghoo/golang-design-patter
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>Golang Concurrent</title>
    <link href="http://mex7.github.io/2020/08/27/Golang%20Concurrent/"/>
    <id>http://mex7.github.io/2020/08/27/Golang%20Concurrent/</id>
    <published>2020-08-27T03:29:40.000Z</published>
    <updated>2021-03-21T14:50:35.841Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ambiguous-import"><a href="#ambiguous-import" class="headerlink" title="ambiguous import"></a>ambiguous import</h2><p>模糊不清的引入包</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;ambiguous-import&quot;&gt;&lt;a href=&quot;#ambiguous-import&quot; class=&quot;headerlink&quot; title=&quot;ambiguous import&quot;&gt;&lt;/a&gt;ambiguous import&lt;/h2&gt;&lt;p&gt;模糊不清的引入包&lt;/p&gt;

      
    
    </summary>
    
    
    
      <category term="golang" scheme="http://mex7.github.io/tags/golang/"/>
    
  </entry>
  
  <entry>
    <title>ut</title>
    <link href="http://mex7.github.io/2020/08/24/UT/"/>
    <id>http://mex7.github.io/2020/08/24/UT/</id>
    <published>2020-08-24T03:29:40.000Z</published>
    <updated>2021-04-12T02:29:50.624Z</updated>
    
    <content type="html"><![CDATA[<h2 id="容器化单元测试"><a href="#容器化单元测试" class="headerlink" title="容器化单元测试"></a>容器化单元测试</h2><p><a href="https://github.com/go-kratos/kratos/blob/master/doc/wiki-cn/summary.md" target="_blank" rel="noopener">https://github.com/go-kratos/kratos/blob/master/doc/wiki-cn/summary.md</a></p><h2 id="常用指令"><a href="#常用指令" class="headerlink" title="常用指令"></a>常用指令</h2><p>go test -short $(go list ./… | grep -v /vendor/)</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;容器化单元测试&quot;&gt;&lt;a href=&quot;#容器化单元测试&quot; class=&quot;headerlink&quot; title=&quot;容器化单元测试&quot;&gt;&lt;/a&gt;容器化单元测试&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/go-kratos/kratos/blob/
      
    
    </summary>
    
    
    
      <category term="golang" scheme="http://mex7.github.io/tags/golang/"/>
    
  </entry>
  
  <entry>
    <title>Article</title>
    <link href="http://mex7.github.io/2020/06/08/article/"/>
    <id>http://mex7.github.io/2020/06/08/article/</id>
    <published>2020-06-08T03:29:40.000Z</published>
    <updated>2021-03-21T14:50:35.841Z</updated>
    
    <content type="html"><![CDATA[<h2 id="collection"><a href="#collection" class="headerlink" title="collection"></a>collection</h2><p><a href="https://github.com/golang-standards/project-layout" target="_blank" rel="noopener">project layout</a></p><p><a href="https://github.com/xxjwxc/uber_go_guide_cn" target="_blank" rel="noopener">uber-go/guide</a></p><p><a href="https://draveness.me/golang-101/" target="_blank" rel="noopener">如何写出优雅的 Go 语言代码</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;collection&quot;&gt;&lt;a href=&quot;#collection&quot; class=&quot;headerlink&quot; title=&quot;collection&quot;&gt;&lt;/a&gt;collection&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/golang-sta
      
    
    </summary>
    
    
    
      <category term="golang" scheme="http://mex7.github.io/tags/golang/"/>
    
  </entry>
  
  <entry>
    <title>GIT</title>
    <link href="http://mex7.github.io/2020/05/23/git/"/>
    <id>http://mex7.github.io/2020/05/23/git/</id>
    <published>2020-05-23T03:34:40.000Z</published>
    <updated>2020-06-04T13:32:04.285Z</updated>
    
    <content type="html"><![CDATA[<h2 id="git-clone-地址替换"><a href="#git-clone-地址替换" class="headerlink" title="git clone 地址替换"></a>git clone 地址替换</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global url.<span class="string">"git@github.com:"</span>.insteadOf <span class="string">"https://github.com/"</span></span><br></pre></td></tr></table></figure><h2 id="删除-commit-历史"><a href="#删除-commit-历史" class="headerlink" title="删除 commit 历史"></a>删除 commit 历史</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git checkout --orphan latest_branch</span><br><span class="line">git add -A</span><br><span class="line">git commit -am <span class="string">"init"</span></span><br><span class="line">git branch -D 想要提交的分支（master）</span><br><span class="line">git branch -m 想要提交的分支（master）</span><br><span class="line">git push -f origin 想要提交的分支（master）</span><br></pre></td></tr></table></figure><h2 id="清理-git-文件夹"><a href="#清理-git-文件夹" class="headerlink" title="清理.git 文件夹"></a>清理.git 文件夹</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">git checkout --orphan latest_branch</span><br><span class="line">git add -A</span><br><span class="line">git commit -am <span class="string">"init"</span></span><br><span class="line">git branch -D master</span><br><span class="line">git branch -m master</span><br><span class="line">rm -rf .git</span><br><span class="line">git init</span><br><span class="line">git remote add origin git@github.com:douyu/juno.git</span><br><span class="line">git push --mirror git@github.com:douyu/juno.git</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;git-clone-地址替换&quot;&gt;&lt;a href=&quot;#git-clone-地址替换&quot; class=&quot;headerlink&quot; title=&quot;git clone 地址替换&quot;&gt;&lt;/a&gt;git clone 地址替换&lt;/h2&gt;&lt;figure class=&quot;highlight 
      
    
    </summary>
    
    
    
  </entry>
  
</feed>
